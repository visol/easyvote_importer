<f:layout name="Default" />
<f:section name="subnavigation">
	<f:if condition="{businessUser.uid}">
		<f:then>
			<f:link.action action="cityIndex" arguments="{city:businessUser.uid}"><f:translate key="subnavigation.start" /></f:link.action>
		</f:then>
		<f:else>
			<f:link.action action="cityIndex" arguments="{city:businessUser}"><f:translate key="subnavigation.start" /></f:link.action>
		</f:else>
	</f:if>
</f:section>
<f:section name="left">
	<div class="box-steps">
		2/2
	</div>
</f:section>
<f:section name="main">
	<div class="csc-default box-blue">
		<div id="assignColumns">
			<div class="sortingColumns left">
				<h3><f:translate key="assign.customerColumns" /></h3>
				<ul id="source" class="connected">
					<f:for each="{tableData}" as="tableDataItem" iteration="iterator">
						<li class="value" data-column="{iterator.index}" data-example="{tableDataItem.firstItem}" id="col-{iterator.index}">
							{tableDataItem.name}<br />
							<em><f:translate key="assign.example" /> {tableDataItem.firstItem}</em>
						</li>
					</f:for>
				</ul>
			</div>
			<div class="sortingColumns">
				<h3><f:translate key="assign.easyvoteColumns" /></h3>
				<ul id="target-salutation" class="target connected">
					<li id="name" class="category static ui-state-default">
						Anrede
						<div class="sortable-placeholder"><f:translate key="assign.dropHere" /></div>
					</li>
				</ul>
				<ul id="target-name" class="target connected">
					<li id="name" class="category static ui-state-default">
						Vorname, Nachname
						<div class="sortable-placeholder"><f:translate key="assign.dropHere" /></div>
					</li>
				</ul>
				<ul id="target-address" class="target connected">
					<li id="address" class="category static ui-state-default">
						Strasse, Nr.
						<div class="sortable-placeholder"><f:translate key="assign.dropHere" /></div>
					</li>
				</ul>
				<ul id="target-city" class="target connected">
					<li id="city" class="category static ui-state-default">
						PLZ, Ort
						<div class="sortable-placeholder"><f:translate key="assign.dropHere" /></div>
					</li>
				</ul>
			</div>
			<div class="clear"></div>
			<div class="spacer"></div>
			<f:form noCacheHash="true" id="columnAssignment" action="approve" onsubmit="return validateForm();" >
				<f:form.hidden name="dataset" value="{dataset}" />
				<f:if condition="{businessUser.uid}">
					<f:then>
						<f:form.hidden name="city" value="{businessUser.uid}" />
					</f:then>
					<f:else>
						<f:form.hidden name="city" value="{businessUser}" />
					</f:else>
				</f:if>
				<input class="validate" type="hidden" data-label="Anrede" id="columns-salutation" name="tx_easyvoteimporter_datamanager[columns-salutation]" value="" />
				<input class="validate" type="hidden" data-label="Vorname, Nachname" id="columns-name" name="tx_easyvoteimporter_datamanager[columns-name]" value="" />
				<input class="validate" type="hidden" data-label="Strasse, Nr." id="columns-address" name="tx_easyvoteimporter_datamanager[columns-address]" value="" />
				<input class="validate" type="hidden" data-label="PLZ, Ort" id="columns-city" name="tx_easyvoteimporter_datamanager[columns-city]" value="" />
				<button type="submit" class="buttonBottomRight"><i class="evicon-ok-circled"></i> <f:translate key="assign.confirmAssignment" /></button>
			</f:form>

		</div>
	</div>
	<script>
		var errorTextBegin = "{f:translate(key:'assign.errorTextBegin')}";
		var errorTextEnd = "{f:translate(key:'assign.errorTextEnd')}";
	</script>
</f:section>
<f:section name="right">
	<div class="csc-default box-pink">
		<h2><f:translate key="assign.previewHeader" /></h2>
		<p class="preview">
			<span id="preview-salutation"></span><br />
			<span id="preview-name"></span><br />
			<span id="preview-address"></span><br />
			<span id="preview-city"></span>
		</p>
	</div>
	<div class="csc-default box-lightblue">
		<h2><f:translate key="assign.assignmentHelpHeader" /></h2>
		<f:translate key="assign.assignmentHelpContent" />
		<f:form noCacheHash="true" id="deleteDocument" action="remove">
			<f:form.hidden name="dataset" value="{dataset}" />
			<button type="submit"><i class="evicon-upload"></i> <f:translate key="assign.newAddressList" /></button>
		</f:form>
	</div>
</f:section>